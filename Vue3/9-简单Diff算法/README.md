# 简单Diff算法
当新旧子节点都是一组节点时，为了以最小性能开销完成更新，需要比较两组子节点，用于比较的算法就叫做Diff算法。操作DOM性能开销很大，通过比较规避不必要的操作，减少性能开销。
## 减少DOM操作的性能开销
新旧子节点数量相同，更新子节点
新节点多，多出来的挂载
新节点少，旧节点卸载

## DOM复用与key的作用
当子节点数量相同但是结构不同时，开销又回到了最大开销
通过key可以找到可复用的节点，两个节点type和key都相同，我们认为他可复用DOM，只进行DOM移动
移动前先patch

## 找到需要移动的元素
key相同的两个子节点，顺序(索引)也相同，则不需要移动
如果元素是从后向前移动，且更后面的元素没有移动到自己前面，则不用移动

## 如何移动元素
我们已经知道了需要移动哪些元素，在循环到需要移动的元素时，先找到当前节点前面的节点，前节点已经是确定位置了的(作为新节点的第一个节点，它永远不用移动)，我们只需要通过`nextSibling`属性找到前节点在真实DOM的下一个节点的位置，便可以通过`insertBefore`方法将当前节点移动到这个节点的前面(或者说是前节点的后面)。
## 添加新元素
如果没有新子节点没有找到可以复用的旧子节点，证明是新增元素，找到新子节点的前一个节点的位置，挂载到其后面，如果是第一个元素，则找到父元素的第一个元素的位置，放在其前面。

## 移除不存在的元素
在新子节点列表里找旧子节点，如果没找到，就卸载该节点。